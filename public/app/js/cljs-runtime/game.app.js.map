{"version":3,"sources":["game/app.cljs"],"mappings":";AAGA,AAAKA,kBAAO,uBAAA,vBAAgBC;AAC5B,AAAKC,mBAAQ,uBAAA,vBAAgBD;AAC7B,AAAKE,2BAAgB,uBAAA,vBAAgBF;AACrC,AAAKG,mBAAQ,uBAAA,vBAAgBH;AAC7B,AAAKI,sBAAW,uBAAA,vBAAgBJ;AAChC,AAAKK,aAAE,2BAAA,3BAAaN;AACpB,CAAM,AAASA,wBAAQ,AAAcO;AACrC,CAAM,AAAUP,yBAAQ,AAAeO;AACvC,AAMA,wBAAA,xBAAMC,wDAAcC,EAAEC,EAAEC,OAAOC;AAA/B,AAAA,kDAAA,iDAAA,kDAAA,iEAAA,6DAAA,lLACMH,kDACAC,4DACKC,8DACDC,2DACD;AAAA,AACE,AAAYN;;AACZ,0BAAA,1BAAMA,eAAEG,EAAEC,EAAEC,WAAS,CAAA,MAAK,AAAME;;AAChC,CAAM,AAAaP,uBAAGM;;AACtB,OAAON;;;AAElB,uBAAA,vBAAMQ,sDAAaL,EAAEC,EAAEC,OAAOC,MAAMG;AAApC,AAAA,kDAAA,iDAAA,kDAAA,iEAAA,6DAAA,sEAAA,xPACMN,kDACAC,4DACKC,8DACDC,mEACGG,kEACF;AAAA,AACE,AAAIT;;AACJ,0BAAA,1BAAIA,eAAQG,EAAEC,EAAEC,WAAS,CAAA,MAAK,AAAME;;AACpC,CAAM,AAAIP,uBAAcM;;AACxB,AAAON;;AACP,IAAAU,WAAa,CAAG,iFAAA,qEAAA,rJAACD,yCAAAA,yFAAAA,sEAAaN;IAA9BQ,WAAiC,CAAG,iFAAA,sEAAA,tJAACF,yCAAAA,0FAAAA,uEAAaL;IAAlDQ,WAAqDP;IAArDQ,WAA4DP;IAA5DQ,WAAkEL;AAAlE,AAAA,gHAAAC,SAAAC,SAAAC,SAAAC,SAAAC,2CAAAJ,SAAAC,SAAAC,SAAAC,SAAAC,3NAACN,qDAAAA,mGAAAA;;;AAEd,4BAAA,5BAAMO,gEAAkBZ,EAAEC,EAAEC,OAAOC,MAAMG;AAAzC,AAAA,kDAAA,iDAAA,kDAAA,iEAAA,6DAAA,sEAAA,xPACMN,kDACAC,4DACKC,8DACDC,mEACGG,kEACF;AAAA,AACE,AAAIT;;AACJ,0BAAA,1BAAIA,eAAQG,EAAEC,EAAEC,WAAS,CAAA,MAAK,AAAME;;AACpC,CAAM,AAAIP,uBAAcM;;AACxB,AAAON;;AACP,IAAAgB,WAAkB,CAAG,iFAAA,qEAAA,rJAACP,yCAAAA,yFAAAA,sEAAaN;IAAnCc,WAAsC,CAAG,iFAAA,sEAAA,tJAACR,yCAAAA,0FAAAA,uEAAaL;IAAvDc,WAA0Db;IAA1Dc,WAAiEb;IAAjEc,WAAuEX;AAAvE,AAAA,0HAAAO,SAAAC,SAAAC,SAAAC,SAAAC,gDAAAJ,SAAAC,SAAAC,SAAAC,SAAAC,1OAACL,0DAAAA,wGAAAA;;;AAEd,AAAA,0BAAA,kCAAAM,5DAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,6DAAAF;;;AAAA,AAAA,CAAA,+DAAA,WAAAG,1EAAMD;AAAN,AAAA,IAAAE,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;QAAA,AAAAE,4CAAAF,eAAA,/DAAgC1B;QAAhC,AAAA4B,4CAAAF,eAAA,/DAAkCzB;aAAlC,AAAA2B,4CAAAF,eAAA,pEAAoCxB;YAApC,AAAA0B,4CAAAF,eAAA,nEAA2CvB;eAA3C,AAAAyB,4CAAAF,eAAA,tEAAiDpB;YAAjD,AAAAsB,4CAAAF,eAAA,nEAA0DM;AAA1D,AAAA,kDAAA,gEAAA,2CAAA,iDAAA,kDAAA,iEAAA,6DAAA,sEAAA,sEAAA,9TACmBhC,kDACAC,4DACKC,8DACDC,mEACGG,iEACH0B,uEACZ;mCAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAP,4BAAAO;YAAA,AAAAN,4CAAAM,eAAA,nEAAelC;YAAf,AAAA4B,4CAAAM,eAAA,nEAAiBjC;iBAAjB,AAAA2B,4CAAAM,eAAA,xEAAmBhC;gBAAnB,AAAA0B,4CAAAM,eAAA,vEAA0B/B;mBAA1B,AAAAyB,4CAAAM,eAAA,1EAAgC5B;gBAAhC,AAAAsB,4CAAAM,eAAA,vEAAyCF;AAAzC,AACE,AAAInC;;AACJ,CAAM,AAAIA,yBAAiBmC;;AAC3B,AAAInC;;AACJ,sCAAA,tCAAIA,eAAQG,MAAEC,MAAEC,eAAS,CAAA,MAAK,AAAME;;AACpC,CAAM,AAAIP,uBAAcM;;AACxB,AAAON;;AACP,AAAIA;;AACJ,sHAAA,2CAAA,oRAAA,uRAAA,qEAAA,iEAAA,0EAAA,r5BAACsC,yMAAmB,CAAG,CAAA,MAAO,yFAAA,yEAAA,jKAAC7B,6CAAAA,6FAAAA,2EAAcN,uDACzB,CAAG,CAAA,MAAO,yFAAA,0EAAA,lKAACM,6CAAAA,8FAAAA,4EAAcL,iEACpBC,kEACDC,uEACGG,qEACH,aAAA,ZAAG0B;;;IAb7BC;;;;EAAAA;;oCAAAA;;;IAAAA;0BAAAA;;;;;;;;AAPX,CAAA,kDAAA,lDAAMT;;AAAN;AAAA,CAAA,4CAAA,WAAAK,vDAAML;AAAN,AAAA,IAAAM,qBAAA;AAAA,AAAA,OAAAA,wDAAA,AAAAC,cAAAF;;;AAAA,AAuBA,AAAKO,aAAE,yBAAA,xBAAG,AAAS7C;AACnB,AAAK8C,aAAE,0BAAA,zBAAG,AAAU9C;AACpB,AAAK+C,kBAAO,4CAAA,KAAA,jDAACvC,sBAAaqC,WAAEC;AAC5B,AAAKE,uBAAY,6CAAA,7CAACC;AAClB,AAAKC,mBAAQ,6CAAA,7CAACD;AACd,AAAKE,qBAAU,6CAAA,7CAACF;AAChB,AAAKG,iBAAM,6CAAA,7CAACH;AAOZ,+BAAA,/BAAMI,sEAAqB1C;AAA3B,AACE,0BAAA,mFAAA,oUAAA,1aAAC2C,yLAAW,mBAAA,nBAACA,sGAAU,CAAA,MAAK3C,QAAQ,CAAGA,SAAO,AAAIX,gCAAkB,CAAG,AAACuD,iDAAM,AAAIvD,mHACtE,CAAG,AAACuD,iDAAM,AAAIvD,uBAAgB,mBAAA,nBAACsD,sGAAU,CAAA,MAAK3C,QAAQ,CAAGA,SAAO,AAAIX;;AAIlF,iCAAA,jCAAMwD;AAAN,AACE,IAAM7C,SAAO,CAAA,MAAK,mBAAA,nBAACgD;IAAnBF,aACY,AAACJ,6BAAoB1C;QADjC,AAAA+C,4CAAAD,WAAA,IAAA,/DACOhD;QADP,AAAAiD,4CAAAD,WAAA,IAAA,/DACS/C;IACHE,QAAM,CAAA,8GAAA,1DAAa,kDAAA,jDAAG,AAAC2C;IACvBK,QAAM,AAAQ/C,WACA,CAAG,0BAAA,zBAAG,AAAIb,gCAAmBU,GAC7B,CAAG,yBAAA,xBAAG,AAAIV,+BAAkBS;eALhD,2CAAA,+DAAA,rHAMMM,qGAAa,AAAMF,SAAQ+C,uDAAU,AAAM/C,SAAQ+C;AANzD,AAOE,OAAC9C,qBAAYL,EAAEC,EAAEC,OAAOC,MAAMG;;AAKlC,yBAAA,zBAAM8C;AAAN,AACE,IAAMC,WAAS;AAAA,AAAO,OAACC,sBAAOb,iBAAQ,6CAAA,AAAAc,7CAACC,6DAAMf,kBAAQ,AAACM;;AAAtD,AACE,4BAAA,rBAACU,YAAeJ;;AAGpB,0BAAA,1BAAMK,4DAAUC,EAAEC;AAAlB,AACE,IAAMC,OAAK,AAAQzD,WAAQ,CAAG,mEAAA,8DAAA,hIAACuD,kCAAAA,kFAAAA,+DAAM,mEAAA,8DAAA,hIAACC,kCAAAA,kFAAAA,8DACnB,CAAG,mEAAA,+DAAA,jIAACD,kCAAAA,mFAAAA,gEAAM,mEAAA,+DAAA,jIAACC,kCAAAA,mFAAAA;AAD9B,AAEE,GAAI,gaAAA,/ZAAG,CAAA,CAAGC,OAAK,mEAAA,yEAAA,3IAACD,kCAAAA,6FAAAA,2EAAW,mEAAA,yEAAA,3IAACD,kCAAAA,6FAAAA;AAA5B;;AAAA;;;AAIJ,2BAAA,3BAAMG,8DAAiBC;AAAvB,AACE,IAAMC,OAAK,AAACC,8CAAM,AAACC,gBAAMH;AAAzB,AACE,OAACI,iBAAOH,KAAKD;;AAEjB,yBAAA,zBAAMK,0DAAeC;AAArB,AACE,oDAAA,7CAACC,8EAAQ,4CAAA,WAAAC,vDAACC;AAAD,AAAM,wBAAAD,jBAACE;GAAUJ;;AAE5B,4BAAA,5BAAMK,gEAAYC,OAAOC;AAAzB,AACE,IAAMC,aAAW,4CAAA,WAAAC,vDAACN;AAAD,AAAM,sCAAAM,/BAACpB,wBAASiB;GAAhB,AAAApB,gBAA2BqB;AAA5C,AACE,oBAAI,AAACG,eAAKC,sBAAMH;AAAhB;;AAAA;;;AAIJ,mBAAA,nBAAMI,8CAASC,MAAMC;AAArB,AACE,oDAAA,7CAACb,8EAAQ,AAACc,+CAAOF,MAAMC;;AAEzB,6BAAA,7BAAME,kEAAaC;AAAnB,AACE,GAAI,2aAAA,6bAAA,t2BAAI,+ZAAA,9ZAAG,CAAG,6EAAA,mEAAA,/IAACA,uCAAAA,uFAAAA,oEAAW,6EAAA,8EAAA,1JAACA,uCAAAA,kGAAAA,4FACnB,CAAG,CAAG,6EAAA,mEAAA,/IAACA,uCAAAA,uFAAAA,oEAAW,6EAAA,8EAAA,1JAACA,uCAAAA,kGAAAA,gFAAiB,AAAI/F,8BACxC,iaAAA,haAAG,CAAG,6EAAA,oEAAA,hJAAC+F,uCAAAA,wFAAAA,qEAAW,6EAAA,8EAAA,1JAACA,uCAAAA,kGAAAA,0FACnB,CAAG,CAAG,6EAAA,oEAAA,hJAACA,uCAAAA,wFAAAA,qEAAW,6EAAA,8EAAA,1JAACA,uCAAAA,kGAAAA,gFAAiB,AAAI/F;AAHhD;;AAAA;;;AAOF,8BAAA,9BAAMgG,oEAAoBC,WAAWC,WAAWC,YAAYd;AAA5D,AACE,IAAMe,QAAM,uDAAA,vDAACC,+CAAOhB,2FAASa;IACvBI,aAAW,2DAAA,3DAACD,+CAAOF,+FAAaF;AADtC,AAEE,oBACC,iBAAAM,mBAAI,AAACpC,wBAASmC,WAAWF;AAAzB,AAAA,GAAAG;AAAAA;;AACI,OAACT,2BAAYQ;;;AACjBL;;AAHD;;;AAMJ,yBAAA,zBAAMO,0DAAeP,WAAWC,WAAWC,YAAYd;AAAvD,AACE,IAAMe,QAAM,uDAAA,vDAACC,+CAAOhB,2FAASa;IACvBI,aAAW,2DAAA,3DAACD,+CAAOF,+FAAaF;IAChCQ,oBAAkB,6CAAA,7CAACxD;AAFzB,AAGE,GAAI,AAACkB,wBAASmC,WAAWF;AACvB,IAAMM,aAAW,uNAAA,tNAAG,2EAAA,6EAAA,vJAACN,sCAAAA,iGAAAA;IACfO,YAAU,AAAC7F,qBAAY,2EAAA,kEAAA,5IAACsF,sCAAAA,sFAAAA,iEACD,2EAAA,mEAAA,7IAACA,sCAAAA,uFAAAA,kEACDM,WACA,2EAAA,0EAAA,pJAACN,sCAAAA,8FAAAA,yEACD,2EAAA,gFAAA,1JAACA,sCAAAA,oGAAAA;AAL9B,AAME,kEAAA,WAAAQ,7EAACC,mDAAMzD;AAAP,AAAc,QAAA,QAAAwD;;;AACd,8BAAA,AAAA5C,7BAAM,AAAI9D,6CAAqBkD;;AAC/B,iCAAA,AAAAY,hCAAM,AAAI3D,gDAAwB+C;;AAClC,AAACW,sBAAO0C,kBAAkB,6CAAA,7CAAC1B,8EACK,+QAAA,/QAAC+B,mDAAW,CAAA,MAAO,2EAAA,6EAAA,vJAACV,sCAAAA,iGAAAA;AAApB,AACa,sHAAA,2CAAA,yPAAA,4PAAA,wDAAA,IAAA,iHAAA,iRAAA,6DAAA,2CAAA,iKAAA,t1CAACxD,yMAAmB,mFAAA,sEAAA,xJAAC+D,0CAAAA,0FAAAA,qHACD,mFAAA,uEAAA,zJAACA,0CAAAA,2FAAAA,4LAEI,CAAA,MAAK,AAACpD,uGACP,mFAAA,8EAAA,hKAACoD,0CAAAA,kGAAAA,oOACM,CAAG,kDAAA,jDAAG,AAACpD,wDAAS,kDAAA,jDAAG,AAACA,uGACpB,CAAG,kDAAA,jDAAG,AAACA,wDAAS,kDAAA,jDAAG,AAACA;;;AAChG,GAAI,cAAA,bAAGmD;AAAP,qGAAA,AAAA1C,XACGkC,2BAAYO;;AADf,+GAAA,AAAAzC,rBAEGkC,WAAWS,0BAAWF;;;AArB7B;;;AAyBJ,0BAAA,1BAAMM,4DACHZ,YAAYd;AADf,AAEE,IAAM2B,kBAAgB,6CAAA,WAAAC,xDAACC;AAAD,AAAO,IAAAC,eAAC,CAAAF,iDAAAA,+CAAA,4DAAAA,2BAAA;AAAD,AAAA,QAAAE,6CAAAA,+CAAAA;GAAP,AAAAnD,gBAAsBmC;IACtCiB,cAAY,6CAAA,WAAAC,xDAACH;AAAD,AAAO,IAAAI,eAAC,CAAAD,iDAAAA,+CAAA,4DAAAA,2BAAA;AAAD,AAAA,QAAAC,6CAAAA,+CAAAA;GAAP,AAAAtD,gBAAsBqB;IAClCkC,gBAAc,AAACtE,6CAAK,6CAAA,WAAAuE,xDAACN;AAAD,AAAO,IAAAO,WAAa,CAAAD,iDAAAA,+CAAA,mEAAAA,2BAAA;IAAbE,eAAC,CAAAF,iDAAAA,+CAAA,4DAAAA,2BAAA;AAAD,AAAA,QAAAE,6CAAAA,2CAAAD,YAAAC,uBAAAD;GAAP,AAAAzD,gBAAsCb;IAC1DwE,WAAS,AAAC1E,6CAAK,AAACsB,yBAAgByC;IAChCY,WAAS,AAAC3E,6CAAK,AAACsB,yBAAgB6C;AAJtC,AAKE,IAAAS,mBAAA,AAAArF,cAAmB,AAACkC,8CAAM,AAACC,gBAAMyC;IAAjCU,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,uBAAA,AAAAD,wDAAAE,3EAAQ9B;AAAR,AAAA,AACE,IAAAsC,mBAAA,AAAAhG,cAAmB,AAACkC,8CAAM,AAACC,gBAAMqC;IAAjCyB,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,uBAAA,AAAAD,wDAAAE,3EAAQ1C;AAAR,AAAA,AACE,IAAM+C,oBAAY,AAAChD,4BACAC,iBACAC,iBACAc,gBACAI;IACb6B,oBAAY,AAACzC,uBACAP,iBACAC,iBACAc,gBACAI;AATnB,AAUE,AAACP,mDAAMc,SAASuB,iBAAOF;;AACvB,GAAI,sCAAA,rCAAG,AAAErE,gBAAMsE;AACb,IAAAE,mBAAkCF;kBAAlC,AAAAvF,4CAAAyF,iBAAA,IAAA,/EAAOI;kBAAP,AAAA7F,4CAAAyF,iBAAA,IAAA,/EAAaK;0BAAb,AAAA9F,4CAAAyF,iBAAA,IAAA,vFAAmBM;AAAnB,AACE,AAAC5C,mDAAMe,SAAS8B,gBAAMH,YAAMC;;AAC5B,AAAC3C,mDAAMU,cAAc7B,iBAAQ+D;;AAC/B,IAAAE,mBAA4BV;kBAA5B,AAAAvF,4CAAAiG,iBAAA,IAAA,/EAAOJ;0BAAP,AAAA7F,4CAAAiG,iBAAA,IAAA,vFAAaF;AAAb,AACE,AAAC5C,mDAAMe,SAASsB,iBAAOK;;AACvB,AAAC1C,mDAAMU,cAAc7B,iBAAQ+D;;;AAlBrC;AAAA,eAAAjB;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAV,2BAAA,AAAAzF,cAAAgG;AAAA,AAAA,GAAAP;AAAA,AAAA,IAAAO,uBAAAP;AAAA,AAAA,GAAA,AAAAC,6BAAAM;AAAA,IAAAL,wBAAA,AAAAC,sBAAAI;AAAA,AAAA,eAAA,AAAAH,qBAAAG;eAAAL;eAAA,AAAAxD,gBAAAwD;eAAA;;;;;;;AAAA,uBAAA,AAAAG,gBAAAE,nCAAQvC;AAAR,AAAA,AACE,IAAM+C,oBAAY,AAAChD,4BACAC,iBACAC,iBACAc,gBACAI;IACb6B,oBAAY,AAACzC,uBACAP,iBACAC,iBACAc,gBACAI;AATnB,AAUE,AAACP,mDAAMc,SAASuB,iBAAOF;;AACvB,GAAI,sCAAA,rCAAG,AAAErE,gBAAMsE;AACb,IAAAG,mBAAkCH;kBAAlC,AAAAvF,4CAAA0F,iBAAA,IAAA,/EAAOG;kBAAP,AAAA7F,4CAAA0F,iBAAA,IAAA,/EAAaI;0BAAb,AAAA9F,4CAAA0F,iBAAA,IAAA,vFAAmBK;AAAnB,AACE,AAAC5C,mDAAMe,SAAS8B,gBAAMH,YAAMC;;AAC5B,AAAC3C,mDAAMU,cAAc7B,iBAAQ+D;;AAC/B,IAAAG,mBAA4BX;kBAA5B,AAAAvF,4CAAAkG,iBAAA,IAAA,/EAAOL;0BAAP,AAAA7F,4CAAAkG,iBAAA,IAAA,vFAAaH;AAAb,AACE,AAAC5C,mDAAMe,SAASsB,iBAAOK;;AACvB,AAAC1C,mDAAMU,cAAc7B,iBAAQ+D;;;AAlBrC;AAAA,eAAA,AAAAlB,eAAAC;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AADF;AAAA,eAAAX;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAC,2BAAA,AAAAzF,cAAAqF;AAAA,AAAA,GAAAI;AAAA,AAAA,IAAAJ,uBAAAI;AAAA,AAAA,GAAA,AAAAC,6BAAAL;AAAA,IAAAM,wBAAA,AAAAC,sBAAAP;AAAA,AAAA,eAAA,AAAAQ,qBAAAR;eAAAM;eAAA,AAAAxD,gBAAAwD;eAAA;;;;;;;AAAA,uBAAA,AAAAG,gBAAAT,nCAAQ3B;AAAR,AAAA,AACE,IAAA0C,mBAAA,AAAApG,cAAmB,AAACkC,8CAAM,AAACC,gBAAMqC;IAAjC6B,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,uBAAA,AAAAD,wDAAAE,3EAAQ9C;AAAR,AAAA,AACE,IAAM+C,oBAAY,AAAChD,4BACAC,iBACAC,iBACAc,gBACAI;IACb6B,oBAAY,AAACzC,uBACAP,iBACAC,iBACAc,gBACAI;AATnB,AAUE,AAACP,mDAAMc,SAASuB,iBAAOF;;AACvB,GAAI,sCAAA,rCAAG,AAAErE,gBAAMsE;AACb,IAAAI,mBAAkCJ;kBAAlC,AAAAvF,4CAAA2F,iBAAA,IAAA,/EAAOE;kBAAP,AAAA7F,4CAAA2F,iBAAA,IAAA,/EAAaG;0BAAb,AAAA9F,4CAAA2F,iBAAA,IAAA,vFAAmBI;AAAnB,AACE,AAAC5C,mDAAMe,SAAS8B,gBAAMH,YAAMC;;AAC5B,AAAC3C,mDAAMU,cAAc7B,iBAAQ+D;;AAC/B,IAAAI,mBAA4BZ;kBAA5B,AAAAvF,4CAAAmG,iBAAA,IAAA,/EAAON;0BAAP,AAAA7F,4CAAAmG,iBAAA,IAAA,vFAAaJ;AAAb,AACE,AAAC5C,mDAAMe,SAASsB,iBAAOK;;AACvB,AAAC1C,mDAAMU,cAAc7B,iBAAQ+D;;;AAlBrC;AAAA,eAAAb;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAd,+BAAA,AAAAzF,cAAAoG;AAAA,AAAA,GAAAX;AAAA,AAAA,IAAAW,uBAAAX;AAAA,AAAA,GAAA,AAAAC,6BAAAU;AAAA,IAAAT,wBAAA,AAAAC,sBAAAQ;AAAA,AAAA,eAAA,AAAAP,qBAAAO;eAAAT;eAAA,AAAAxD,gBAAAwD;eAAA;;;;;;;AAAA,uBAAA,AAAAG,gBAAAM,nCAAQ3C;AAAR,AAAA,AACE,IAAM+C,oBAAY,AAAChD,4BACAC,iBACAC,iBACAc,gBACAI;IACb6B,oBAAY,AAACzC,uBACAP,iBACAC,iBACAc,gBACAI;AATnB,AAUE,AAACP,mDAAMc,SAASuB,iBAAOF;;AACvB,GAAI,sCAAA,rCAAG,AAAErE,gBAAMsE;AACb,IAAAK,mBAAkCL;kBAAlC,AAAAvF,4CAAA4F,iBAAA,IAAA,/EAAOC;kBAAP,AAAA7F,4CAAA4F,iBAAA,IAAA,/EAAaE;0BAAb,AAAA9F,4CAAA4F,iBAAA,IAAA,vFAAmBG;AAAnB,AACE,AAAC5C,mDAAMe,SAAS8B,gBAAMH,YAAMC;;AAC5B,AAAC3C,mDAAMU,cAAc7B,iBAAQ+D;;AAC/B,IAAAK,mBAA4Bb;kBAA5B,AAAAvF,4CAAAoG,iBAAA,IAAA,/EAAOP;0BAAP,AAAA7F,4CAAAoG,iBAAA,IAAA,vFAAaL;AAAb,AACE,AAAC5C,mDAAMe,SAASsB,iBAAOK;;AACvB,AAAC1C,mDAAMU,cAAc7B,iBAAQ+D;;;AAlBrC;AAAA,eAAA,AAAAlB,eAAAK;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AADF;AAAA,eAAA,AAAAL,eAAAV;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AALF,8LAAA,AAAA7D,pGAyBG,uBAAA,AAAAA,vBAACa,uCAAe8C,WAAU,uBAAA,AAAA3D,vBAACa,uCAAe+C,2BAAWL;;AAK1D,mBAAA,nBAAMwC;AAAN,AACE,IAAMC,kBAAgB,AAAIzJ,6BAAiCwJ;AAA3D,AACE,wBAAA,vBAAM,AAAIzJ;;AACV,oBAAA,IAAA,xBAAIA,4BAAgB,AAAIN,sBAAe,AAAIA;;AAE3C,IAAAiK,qBAAC,+FAAA,kFAAA,hLAAClH,gDAAAA,sGAAAA;AAAF,AAAA,CAAAkH,mDAAAA,qDAAAA;;AACA,IAAAC,mBACM,AAACnD,wBAAe/D,qBAAYE;4BADlC,AAAAQ,4CAAAwG,iBAAA,IAAA,zFAAOlD;wBAAP,AAAAtD,4CAAAwG,iBAAA,IAAA,rFAAuB9C;0BAAvB,AAAA1D,4CAAAwG,iBAAA,IAAA,vFAAmCC;AAAnC,AAEE,AAACpG,sBAAOb,iBAAQkE;;AAChB,AAACrD,sBAAOf,qBAAYgE;;AACpB,IAAMyC,sBAAc,6CAAA,WAAAW,xDAAClD;AAAD,AAAO,IAAAmD,WAAa,CAAAD,iDAAAA,+CAAA,mEAAAA,2BAAA;IAAbE,eAAC,CAAAF,iDAAAA,+CAAA,4DAAAA,2BAAA;AAAD,AAAA,QAAAE,6CAAAA,2CAAAD,YAAAC,uBAAAD;GAA8BF;AAAzD,AAEE,AAACpG,sBAAOZ,mBAAU,+CAAA,WAAAoH,1DAACC;AAAD,AAAS,QAAI,iBAAAC,eAAC,CAAAF,iDAAAA,+CAAA,mEAAAA,2BAAA;AAAD,AAAA,QAAAE,6CAAAA,2CAAA,2DAAAA,uBAAA;QAAJ;GAAmChB;;AAElE,oBAAI,AAACtE,0BAAWpC,gBAAOG;AACrB,AACE,AAAI3C,4BAAgCyJ;;AACpC,yCAAA,jCAAM,AAAA,AAAI5J;;AAHd;;;AAcJ,wBAAA,xBAAmBG,gCAEA,WAAKmK;AAAL,AACE,IAAM9G,QAAM,AAAQ/C,WAAQ,CAAG,AAAI6J,gBAAgB,0BAAA,zBAAG,AAAI1K,+BAAoB,CAAG,AAAI0K,gBAAgB,yBAAA,xBAAG,AAAI1K;eAA5G,2CAAA,uEAAA,7HACMe,qGAAa,CAAA,MAAK,AAAMF,SAAQ+C,wDACnB,CAAA,MAAK,AAAM/C,SAAQ+C;AAFtC,AAGE,OAACG,sBAAOf,qBAAY,6CAAA,AAAAgB,7CAACC,6DAAMjB,sBAAY,uFAAA,IAAA,3FAAC3B,0BACA,yBAAA,xBAAG,AAASrB,6BACZ,0BAAA,zBAAG,AAAUA,0CAGbe;;AAE/D,gBAAA,hBAAM4J;AAAN,AACE,2CAAA,3CAAC5G,sBAAOf;;AACR,uCAAA,vCAACe,sBAAOb;;AACR,yCAAA,zCAACa,sBAAOZ;;AACR,4CAAA,rCAACY,sBAAOX;;AAEV,0CAAA,1CAAmBjD,kDAEC;AAAA,AACE,AAACwK;;AACD,AAACZ;;AACD,AAAClG;;AACD,kCAAA,jCAAM,AAAA,AAAIzD;;AACV,8BAAA,7BAAM,AAAIF;;AACV,wCAAA,hCAAM,AAAIG","names":["game.app/canvas","js/document","game.app/scoreEl","game.app/startGameButton","game.app/modalEl","game.app/bigScoreEl","game.app/c","js/window","game.app/build-player","x","y","radius","color","js/Math","game.app/build-enemy","velocity","G__34077","G__34078","G__34079","G__34080","G__34081","game.app/build-projectile","G__34082","G__34083","G__34084","G__34085","G__34086","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","game.app/build-particle","p__34088","map__34089","cljs.core/--destructure-map","cljs.core.get","seq34087","self__5755__auto__","cljs.core/seq","alpha","p__34090","map__34091","game.app.build_particle","game.app/x","game.app/y","game.app/player","game.app/projectiles","cljs.core.atom","game.app/enemies","game.app/particles","game.app/score","game.app/randomise-locations","cljs.core/rand-nth","cljs.core.rand","game.app/generate-random-enemy","vec__34092","cljs.core.nth","cljs.core/rand-int","angle","game.app/spawn-enemies","enemy-fn","cljs.core/reset!","cljs.core/deref","cljs.core.conj","js/setInterval","game.app/contact?","a","b","dist","game.app/mapisize-vector","vect","nums","cljs.core.range","cljs.core/count","cljs.core/zipmap","game.app/vectorize-map","mapping","cljs.core.into","p1__34095#","cljs.core.map","cljs.core/second","game.app/game-over?","player","enemies","collisions","p1__34096#","cljs.core/some","cljs.core/true?","game.app/concatv","list1","list2","cljs.core.concat","game.app/off-screen?","object","game.app/projection-handler","proj-index","enem-index","projectiles","enemy","cljs.core.get_in","projectile","or__5045__auto__","game.app/enemy-handler","current-particles","new-radius","new-enemy","p1__34097#","cljs.core.swap_BANG_","cljs.core.repeatedly","game.app/handle-enemies","new-projectiles","p1__34098#","cljs.core.mapv","fexpr__34101","new-enemies","p1__34099#","fexpr__34102","res-particles","p1__34100#","G__34104","fexpr__34103","proj-map","enem-map","seq__34105","chunk__34106","count__34107","i__34108","temp__5804__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/first","cljs.core/next","seq__34165","chunk__34166","count__34167","i__34168","seq__34193","chunk__34194","count__34195","i__34196","delete-proj","delete-enem","cljs.core/dissoc","vec__34181","vec__34187","vec__34209","vec__34215","index","entry","new-particles","cljs.core/assoc","vec__34184","vec__34190","vec__34212","vec__34218","game.app/animate","animation-frame","fexpr__34223","vec__34224","pre-particles","p1__34221#","G__34228","fexpr__34227","p1__34222#","cljs.core.filter","fexpr__34229","event","game.app/init"],"sourcesContent":["(ns game.app)\r\n\r\n;; Iniitalize canvas\r\n(def canvas (.querySelector js/document \"canvas\"))\r\n(def scoreEl (.querySelector js/document \"#scoreEl\"))\r\n(def startGameButton (.querySelector js/document \"#startGameButton\"))\r\n(def modalEl (.querySelector js/document \"#modalEl\"))\r\n(def bigScoreEl (.querySelector js/document \"#bigScoreEl\"))\r\n(def c (.getContext canvas \"2d\"))\r\n(set! (.-width canvas) (.-innerWidth js/window))\r\n(set! (.-height canvas) (.-innerHeight js/window))\r\n(set! *warn-on-infer* false)\r\n\r\n\r\n\r\n; javascript constructors\r\n\r\n(defn build-player [x y radius color]\r\n  {:x x\r\n   :y y\r\n   :radius radius\r\n   :color color\r\n   :draw (fn []\r\n           (.beginPath c)\r\n           (.arc c x y radius 0 (* 2 (.-PI js/Math)))\r\n           (set! (.-fillStyle c) color)\r\n           (.fill c))})\r\n\r\n(defn build-enemy [x y radius color velocity]\r\n  {:x x\r\n   :y y\r\n   :radius radius\r\n   :color color\r\n   :velocity velocity\r\n   :update (fn []\r\n             (.. c beginPath)\r\n             (.. c  (arc x y radius 0 (* 2 (.-PI js/Math))))\r\n             (set! (.. c -fillStyle) color)\r\n             (.fill c)\r\n             (build-enemy (+ (velocity :x) x) (+ (velocity :y) y) radius color velocity))})\r\n\r\n(defn build-projectile [x y radius color velocity]\r\n  {:x x\r\n   :y y\r\n   :radius radius\r\n   :color color\r\n   :velocity velocity\r\n   :update (fn []\r\n             (.. c beginPath)\r\n             (.. c  (arc x y radius 0 (* 2 (.-PI js/Math))))\r\n             (set! (.. c -fillStyle) color)\r\n             (.fill c)\r\n             (build-projectile (+ (velocity :x) x) (+ (velocity :y) y) radius color velocity))})\r\n\r\n(defn build-particle [& {:keys [x y radius color velocity alpha]}]\r\n  {:attributes {:x x\r\n                :y y\r\n                :radius radius\r\n                :color color\r\n                :velocity velocity\r\n                :alpha alpha}\r\n   :update (fn [& {:keys [x y radius color velocity alpha]}]\r\n             (.. c save)\r\n             (set! (.. c -globalAlpha ) alpha)\r\n             (.. c beginPath)\r\n             (.. c  (arc x y radius 0 (* 2 (.-PI js/Math))))\r\n             (set! (.. c -fillStyle) color)\r\n             (.fill c)\r\n             (.. c restore)\r\n             (build-particle {:x (+ (* 0.8 (velocity :x)) x)\r\n                              :y (+ (* 0.8 (velocity :y)) y)\r\n                              :radius radius\r\n                              :color color\r\n                              :velocity velocity\r\n                              :alpha (- alpha 0.01)}))})\r\n; initialise states \r\n\r\n(def x (/ (.-width canvas) 2))\r\n(def y (/ (.-height canvas) 2))\r\n(def player (build-player x y 10 \"white\"))\r\n(def projectiles (atom []))\r\n(def enemies (atom []))\r\n(def particles (atom []))\r\n(def score (atom 0))\r\n\r\n\r\n\r\n\r\n;helper functions\r\n\r\n(defn randomise-locations [radius]\r\n  (rand-nth [[(rand-nth [(- 0 radius) (+ radius (.. canvas -width))]) (* (rand) (.. canvas -height))]\r\n             [(* (rand) (.. canvas -width)) (rand-nth [(- 0 radius) (+ radius (.. canvas -height))])]]))\r\n\r\n\r\n\r\n(defn generate-random-enemy []\r\n  (let [radius (+ 7 (rand-int 26))\r\n        [x y] (randomise-locations radius)\r\n        color (str \"hsl( \" (* (rand) 360) \", 50%, 50%)\")\r\n        angle (.atan2 js/Math\r\n                      (- (/ (.. canvas -height) 2) y)\r\n                      (- (/ (.. canvas -width) 2) x))\r\n        velocity {:x (.cos js/Math angle) :y (.sin js/Math angle)}]\r\n    (build-enemy x y radius color velocity)))\r\n\r\n\r\n\r\n\r\n(defn spawn-enemies []\r\n  (let [enemy-fn (fn [] (reset! enemies (conj @enemies (generate-random-enemy))))]\r\n    (js/setInterval enemy-fn 2000)))\r\n\r\n\r\n(defn contact? [a b]\r\n  (let [dist (.hypot js/Math (- (a :x) (b :x))\r\n                     (- (a :y) (b :y)))]\r\n    (if (< (- dist (b :radius) (a :radius)) 1)\r\n      true\r\n      false)))\r\n\r\n(defn mapisize-vector [vect]\r\n  (let [nums (range (count vect))]\r\n    (zipmap nums vect)))\r\n\r\n(defn vectorize-map [mapping]\r\n  (into [] (map #(second %) mapping)))\r\n\r\n(defn game-over? [player enemies]\r\n  (let [collisions (map #(contact? player %) @enemies)]\r\n    (if (some true? collisions)\r\n      true\r\n      nil)))\r\n\r\n(defn concatv [list1 list2]\r\n  (into [] (concat list1 list2)))\r\n\r\n(defn off-screen? [object]\r\n  (if (or (< (+ (object :x) (object :radius)) 0)\r\n          (> (- (object :x) (object :radius)) (.. canvas -width))\r\n          (< (+ (object :y) (object :radius)) 0)\r\n          (> (- (object :y) (object :radius)) (.. canvas -height)))\r\n    true\r\n    nil))\r\n\r\n(defn projection-handler [proj-index enem-index projectiles enemies]\r\n  (let [enemy (get-in enemies [enem-index])\r\n        projectile (get-in projectiles [proj-index])]\r\n    (if\r\n     (or (contact? projectile enemy)\r\n         (off-screen? projectile))\r\n     proj-index\r\n     nil)))\r\n\r\n(defn enemy-handler [proj-index enem-index projectiles enemies]\r\n  (let [enemy (get-in enemies [enem-index])\r\n        projectile (get-in projectiles [proj-index])\r\n        current-particles (atom [])]\r\n    (if (contact? projectile enemy)\r\n      (let [new-radius (- (enemy :radius) 10)\r\n            new-enemy (build-enemy (enemy :x)\r\n                                   (enemy :y)\r\n                                   new-radius\r\n                                   (enemy :color)\r\n                                   (enemy :velocity))]\r\n        (swap! score #(+ 100 %)) \r\n        (set! (.. scoreEl -innerHTML) @score)\r\n        (set! (.. bigScoreEl -innerHTML) @score)\r\n        (reset! current-particles (into []\r\n                                        (repeatedly (* 1.5 (enemy :radius))\r\n                                                    #(build-particle {:x (new-enemy :x)\r\n                                                                      :y (new-enemy :y)\r\n                                                                      :alpha 1\r\n                                                                      :radius (* 2 (rand))\r\n                                                                      :color (new-enemy :color)\r\n                                                                      :velocity {:x (* (* (rand) 5) (- (rand) 0.5))\r\n                                                                                 :y (* (* (rand) 5) (- (rand) 0.5))}}))))\r\n        (if (< new-radius 10)\r\n          [enem-index @current-particles]\r\n          [enem-index new-enemy @current-particles]))\r\n      nil)))\r\n\r\n\r\n(defn handle-enemies\r\n  [projectiles enemies]\r\n  (let [new-projectiles (mapv #((% :update)) @projectiles)\r\n        new-enemies (mapv #((% :update)) @enemies) \r\n        res-particles (atom (mapv #((% :update) (% :attributes)) @particles))\r\n        proj-map (atom (mapisize-vector new-projectiles))\r\n        enem-map (atom (mapisize-vector new-enemies))]\r\n    (doseq [enem-index (range (count new-enemies))]\r\n      (doseq [proj-index (range (count new-projectiles))]\r\n        (let [delete-proj (projection-handler\r\n                           proj-index\r\n                           enem-index\r\n                           new-projectiles\r\n                           new-enemies)\r\n              delete-enem (enemy-handler\r\n                           proj-index\r\n                           enem-index\r\n                           new-projectiles\r\n                           new-enemies)]\r\n          (swap! proj-map dissoc delete-proj)\r\n          (if (> ( count delete-enem) 2)\r\n            (let [[index entry new-particles] delete-enem] \r\n              (swap! enem-map assoc index entry)\r\n              (swap! res-particles concatv new-particles))\r\n            (let [[index new-particles] delete-enem]\r\n              (swap! enem-map dissoc index)\r\n              (swap! res-particles concatv new-particles))))))\r\n    [(vectorize-map @proj-map) (vectorize-map @enem-map) @res-particles]))\r\n\r\n\r\n; animations\r\n\r\n(defn animate []\r\n  (let [animation-frame (.. js/window (requestAnimationFrame animate))]\r\n    (set! (.. c -fillStyle) \"rgba(0 , 0, 0, 0.1)\")\r\n    (.. c (fillRect 0 0 (.. canvas -width) (.. canvas -height)))\r\n    \r\n    ((player :draw))\r\n    (let [[new-projectiles new-enemies pre-particles]\r\n          (handle-enemies projectiles enemies)]\r\n      (reset! enemies new-enemies)\r\n      (reset! projectiles new-projectiles) \r\n      (let [new-particles (mapv #((% :update) (% :attributes)) pre-particles)] \r\n         \r\n        (reset! particles (filter #(>= ((% :attributes) :alpha) 0.01) new-particles))))\r\n        \r\n    (if (game-over? player enemies)\r\n      (do \r\n        (.. js/window (cancelAnimationFrame animation-frame)) \r\n        (set! (.. modalEl -style -display) \"flex\"))\r\n\r\n      nil)))\r\n    \r\n    \r\n    \r\n\r\n\r\n; event listeners \r\n\r\n\r\n(.addEventListener js/window\r\n                   \"click\"\r\n                   (fn [event]\r\n                     (let [angle (.atan2 js/Math (- (.. event -clientY) (/ (.. canvas -height) 2)) (- (.. event -clientX) (/ (.. canvas -width) 2)))\r\n                           velocity {:x (* 5 (.cos js/Math angle))\r\n                                     :y (* 5 (.sin js/Math angle))}]\r\n                       (reset! projectiles (conj @projectiles (build-projectile\r\n                                                               (/ (.-width canvas) 2)\r\n                                                               (/ (.-height canvas) 2)\r\n                                                               5\r\n                                                               \"white\"\r\n                                                               velocity))))))\r\n\r\n(defn init [] \r\n  (reset! projectiles [])\r\n  (reset! enemies [])\r\n  (reset! particles [])\r\n  (reset! score 0))\r\n\r\n(.addEventListener startGameButton\r\n                    \"click\"\r\n                    (fn []\r\n                      (init)\r\n                      (animate)\r\n                      (spawn-enemies)\r\n                      (set! (.. modalEl -style -display) \"none\")\r\n                      (set! (.. scoreEl -innerHTML) 0)\r\n                      (set! (.. bigScoreEl -innerHTML) 0)))\r\n                      \r\n\r\n\r\n\r\n\r\n; Ongoing functions\r\n\r\n\r\n"]}